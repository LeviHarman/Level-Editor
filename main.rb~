require 'rubygems'
require 'gosu'
require './tileclasses.rb'
require './tileclasses.rb'
include Gosu

module ZOrder
  Background, Stars, UI, Mouse = *0..3
end

class LevelEditorWindow < Gosu::Window
    attr_reader :x, :y
    
  def initialize
    super(800, 640, false)
    self.caption = "Level Editor."
    @background_image = Gosu::Image.new(self, "media/GrayBackground640x480.png", true)
    @grass = Gosu::Image.new(self, "media/grass.png", true)
    @cursor = Gosu::Image.new(self, "media/Cursor.png", false)
    @grass_button = GrassButton.new(self)
    @grass_button.warp(760, 0)
    @dirt_button = DirtButton.new(self)
    @dirt_button.warp(720, 0)
    @water_button = WaterButton.new(self)
    @water_button.warp(680, 0)
    @end_button = EndButton.new(self)
    @end_button.warp(640, 0)
  end
  
  def draw
    @background_image.draw(0,0, ZOrder::Background)
    @cursor.draw(mouse_x, mouse_y, ZOrder::Mouse)
    @grass_button.draw
    @dirt_button.draw
    @water_button.draw
    @end_button.draw
    @grass.draw(0,0, ZOrder::Stars)
  end
    
  def button_down(id)
    if id == Gosu::MsLeft then
      if @dirt_button.under_point?(mouse_x, mouse_y) then
        @grass_button.warp(500, 0)
      elsif @grass_button.under_point?(mouse_x, mouse_y) then
        @grass_button.warp(760, 0)
      elsif @end_button.under_point?(mouse_x, mouse_y) then
        Process.exit
      elsif mouse_x >= 0 and mouse_x <= 39 and mouse_y >= 0 and mouse_y <= 39
        @grass.draw(0,0, ZOrder::Stars)
      end
    end
  end
end
LevelEditorWindow.new.show
